<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">

        <title>Gaylian: Schule - Upload</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
        <link rel="icon" href="../static/img/gaylian_50.png">
        <link rel="stylesheet" type="text/css" href="..{{ url_for('static', filename='css/defaultstyle.css') }}">

        <script src="https://cdn.rawgit.com/showdownjs/showdown/1.9.1/dist/showdown.min.js"></script>
        <script>
          function convert() {
            var text = document.getElementById('markdown').value,
            target = document.getElementById('targetDiv'),
            converter = new showdown.Converter(),
            html = converter.makeHtml(text);
              
            target.innerHTML = html;
          }
          function searchDoc() {
              var target = document.getElementById('searchDocWithCode');
              var searchCode = target.value;
              window.location.href  = "cloud/"+searchCode;
          }
        </script>
        <!-- Enabling tabs -->
        <script type="text/javascript">
          var input = document.getElementById("markdown");
          if(input.addEventListener) {
            input.addEventListener('keydown',this.keyHandler,false);
          } else if(input.attachEvent ) {
            input.attachEvent('onkeydown',this.keyHandler); /* damn IE hack */
          }
      
          function keyHandler(e) {
              var TABKEY = 9;
              if(e.keyCode == TABKEY) {
                  this.value += "    ";
                  if(e.preventDefault) {
                      e.preventDefault();
                  }
                  return false;
              }
          }
         </script>
    </head>
    <body>
        <nav class="navbar sticky-top navbar-expand-lg" style="background-color: #e3f2fd;">
            <div class="container-fluid">
                <a class="navbar-brand" href="http://gaylian.net">
                <img src="../static/img/gaylian_50.png" alt="Logo" width="40" height="40">
                </a>
              <a class="navbar-brand" href="http://gaylian.net" style="padding-top: 2px;">gaylian.net</a>
              <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
              </button>
              <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                  <li class="nav-item">
                    <a class="nav-link" aria-current="page" href="http://gaylian.net/cloud/new">Cloud</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="http://gaylian.net/notes/new">Notes</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link active" href="http://gaylian.net/school/new">School</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="http://gaylian.net/mail">Mail-Service</a>
                  </li>      
                  <li class="nav-item">
                    <i class="nav-link disabled">more coming soon...</i>
                  </li>
                </ul>
                <form class="d-flex" role="search">
                  <input class="form-control me-2" type="text" name="code" id="searchDocWithCode" placeholder="Datei suchen" aria-label="Search">
                  <input type="button" class="btn btn-outline-success" name="search" value="Search" onclick="searchDoc()">
                </form>
              </div>
            </div>
        </nav>
        <div class="container px-4" style="padding-top: 15px;">
            <div class="row gx-5">
                <h1>Gaylian: School - Erstelle eine Markdown <a style="color: red;">
                  {{ error }}
                </a></h1>
              <div class="col" style="padding-top: 5px;">
                <div class="shadow rounded p-3 border bg-body">
                    <form name="schoolUpload" method="post">
                        <label for="md" class="form-label fw-semibold">Lade deine Markdown-Texte gleich hier hoch:</label>
                        <textarea class="form-control me-2" name="markdown" id="markdown" placeholder="Text in Markdown-Syntax" maxlength="32000" oninput="convert()"></textarea>
                        <hr>
                        <input class="padding form-control me-2" type="text" name="filecode" id="filecode" placeholder="Code der Datei">
                        <hr>
                        <input class="padding form-control me-2" type="password" name="authCode" id="authCode" placeholder="Gaylian-Nutzer-Code">
                        <hr>
                        <input class="padding form-control me-2" type="text" name="filePass" placeholder="Optionales Password">
                        <hr>
                        <input type="submit" class="padding btn btn-outline-success" value="Hochladen">
                    </form>
                </div>
              </div>
              <div class="col" style="padding-top: 5px;">
                <div class="shadow rounded p-3 border bg-body">
                  <div class="overflow-auto" id="targetDiv">
                    Umgewandelter Text...
                  </div>
                </div>
              </div>
            </div>
        </div>
        <div class="container px-4" style="padding-top: 20px;">
          <div class="row gx-5">
            <div class="col">
              <div class="shadow rounded p-3 border bg-body">
                <div class="accordion" id="id_hilfe">
                  <div class="accordion-item">
                      <h1 class="accordion-header" id="heading_hilfe">
                        <button class="accordion-button collapsed fw-semibold" type="button" data-bs-toggle="collapse" data-bs-target="#hilfe" aria-expanded="false" aria-controls="hilfe">
                          Wie funktioniert Markdown?
                        </button>
                      </h1>
                      <div id="hilfe" class="accordion-collapse collapse" aria-labelledby="heading_hilfe" data-bs-parent="#id_hilfe">
                        <div class="accordion-body">
                          <ul class="list-group list-group-flush">
                            <li class="list-group-item">Überschriften können mit # H1 erstellt werden. <br> Je mehr ### verwendet werden, desto kleiner bzw. untergeordneter sind die Überschriften dargestellt.</li>
                            <li class="list-group-item">Neue Zeilen bzw. altuelle Befehle werden mit zwei Leerzeichen am Ende einer Zeile aufgelöst.</li>
                            <li class="list-group-item"><b>Fetter Text</b> kann mithilfe von **<i>Wort</i>** dagestellt werden.</li>
                            <li class="list-group-item"><i>Kursiver Text</i> kann mithilfe von *<i>Wort</i>* dagestellt werden.</li>
                            <li class="list-group-item">Eine Linie kann mit "---" dargestellt werden.</li>
                            <li class="list-group-item">
                              Listen können zum einen als geordnete Listen dargestellt werden: <br> 
                                1. Erstes Element <br>
                                2. Zweites Element usw.
                            </li>
                            <li class="list-group-item">Listen können zum anderen als Ungeordnete Listen dargestellt werden: <br>
                                * Erstes Element <br>
                                - Zweites Element </li>
                            <li class="list-group-item">Programm-Code kann mit `<code>Code</code>` oder ```<code>Code (mehrere Zeilen)</code>``` dargestellt werden.</li>
                            <li class="list-group-item">Ein Link kann mit [Titel](https://www.example.com) eingebettet werden.</li>
                            <li class="list-group-item">Ein Bild kann mit ![Alternativer Text](http://gaylian.net/cloud/beispiel-bild) eingebettet werden.</li>
                          </ul>
                        </div>
                      </div>
                    </div>
                  </div>
              </div>
            </div>
          </div>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
    </body>
</html>